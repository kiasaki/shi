; REPL

(set repl (fn (env)
  (write *out* "> ")

  (trap-error
    (fn ()
      (println (eval env (parse "repl" (read-line *stdin*)))))
    (fn (e)
      (write *out* e)))

  (repl env)))

(set repl-run (fn ()
  (write *out* (str "Shi Lisp v" *version* " REPL\n"))
  (set env (root-environment))
  (repl env))
