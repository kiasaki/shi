; REPL

(defn repl (env)
  (write "shi> ")

  (trap-error
    (fn ()
      (println (eval env (parse (read-line)))))
    (fn (e)
      (prn e)))

  (repl env))

(defn repl-run ()
  (write (str "Shi Lisp v" *version* " REPL\n"))
  (write "Type (exit) to quit. Or press Ctrl-C\n")
  (def env (root-environment))
  (repl env))
