<!DOCTYPE html>
<title>Shi Language</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="assets/tachyons.min.css" />
<style>
  * {
    box-sizing: border-box;
  }
  a, a:visited {
    color: #A463F2;
  }
  #sidebar strong {
    display: inline-block;
    margin: 1.5em 0 0.5em 0;
  }
  #sidebar a {
    text-decoration: none;
  }
  #sidebar a:hover {
    text-decoration: underline;
  }
  code {
    display: inline-block;
    background: #eee;
    padding: 0 3px;
    border-radius: 3px;
  }
</style>

<div class="center pa4 mw8">
  <header class="tl">
    <img src="assets/logo.png" style="height: 100px;" />
    <h1 class="fw3 dib f1 ma0 ml4 relative top--2">Shi</h1>
  </header>

  <div class="cf">
    <aside class="fl w-25-ns w-100 pr4 tl" id="sidebar">
      <p class="mt0">
        <h3 class="mb0">Language Reference</h3>

        <div><strong class="b">Basics</strong></div>
        <div><a href="#d-def">def</a></div>
        <div><a href="#d-set">set</a></div>
        <div><a href="#d-fn">fn</a></div>
        <div><a href="#d-defn">defn</a></div>
        <div><a href="#d-do">do</a></div>
        <div><a href="#d-while">while</a></div>
        <div><a href="#d-apply">apply</a></div>
        <div><a href="#d-eval">eval</a></div>


        <div><strong class="b">Conditionals</strong></div>
        <div><a href="#d-if">if</a></div>
        <div><a href="#d-cond">cond</a></div>
        <div><a href="#d-not">not</a></div>
        <div><a href="#d-when">when</a></div>
        <div><a href="#d-unless">unless</a></div>
        <div><a href="#d-or">or</a></div>
        <div><a href="#d-and">and</a></div>


        <div><strong class="b">Constants</strong></div>
        <div><a href="#d-t">t</a></div>
        <div><a href="#d-nil">nil</a></div>
        <div><a href="#d-star-args-star">*args*</a></div>
        <div><a href="#d-star-system-version-star">*system-version*</a></div>


        <div><strong class="b">Types</strong></div>
        <div><a href="#d-type">type</a></div>
        <div><a href="#d-eq-qm">eq?</a></div>
        <div><a href="#d-eql-qm">eql?</a></div>
        <div><a href="#d-true-qm">true?</a></div>
        <div><a href="#d-nil-qm">nil?</a></div>
        <div><a href="#d-int-qm">int?</a></div>
        <div><a href="#d-str-qm">str?</a></div>
        <div><a href="#d-cons-qm">cons?</a></div>
        <div><a href="#d-list-qm">list?</a></div>
        <div><a href="#d-sym-qm">sym?</a></div>
        <div><a href="#d-sym-qm">obj?</a></div>
        <div><a href="#d-prim-qm">prim?</a></div>
        <div><a href="#d-fn-qm">fn?</a></div>
        <div><a href="#d-macro-qm">macro?</a></div>
        <div><a href="#d-atom-qm">atom?</a></div>


        <div><strong class="b">Macros</strong></div>
        <div><a href="#d-macro">macro</a></div>
        <div><a href="#d-defmacro">defmacro</a></div>
        <div><a href="#d-quote">quote (')</a></div>
        <div><a href="#d-quasiquote">quasiquote (`)</a></div>
        <div><a href="#d-unquote">unquote (,)</a></div>
        <div><a href="#d-unquote-splicing">unquote-splicing (,@)</a></div>
        <div><a href="#d-gemsym">gensym</a></div>
        <div><a href="#d-macro-expand">macro-expand</a></div>


        <div><strong class="b">Strings</strong></div>
        <div><a href="#d-str">str</a></div>
        <div><a href="#d-str-len">str-len</a></div>
        <div><a href="#d-pr-str">pr-str</a></div>


        <div><strong class="b">Symbols</strong></div>
        <div><a href="#d-sym">sym</a></div>
        <div><a href="#d-sym-to-str">sym-&gt;str</a></div>


        <div><strong class="b">Numbers</strong></div>
        <div><a href="#d-plus">+</a></div>
        <div><a href="#d-minus">-</a></div>
        <div><a href="#d-lt">&lt;</a></div>
        <div><a href="#d-lt-eq">&lt;=</a></div>
        <div><a href="#d-gt">&gt;</a></div>
        <div><a href="#d-gt-eq">&gt;=</a></div>
        <div><a href="#d-eq">=</a></div>
        <div><a href="#d-slash-eq">/=</a></div>
        <div><a href="#d-pair-eq">pair?</a></div>
        <div><a href="#d-odd-eq">odd?</a></div>
        <div><a href="#d-add1">add1</a></div>
        <div><a href="#d-sub1">sub1</a></div>
        <div><a href="#d-min">min</a></div>
        <div><a href="#d-max">max</a></div>
        <div><a href="#d-abs">abs</a></div>
        <div><a href="#d-range">range</a></div>
        <div><a href="#d-rand">rand</a></div>
        <div><a href="#d-num-to-str">num->str</a></div>


        <div><strong class="b">Lists</strong></div>
        <div><a href="#d-list">list</a></div>
        <div><a href="#d-cons">cons</a></div>
        <div><a href="#d-set-car-bang">set-car!</a></div>
        <div><a href="#d-car">car</a></div>
        <div><a href="#d-first">first</a></div>
        <div><a href="#d-cdr">cdr</a></div>
        <div><a href="#d-rest">rest</a></div>
        <div><a href="#d-caar">caar</a></div>
        <div><a href="#d-cadr">cadr</a></div>
        <div><a href="#d-second">second</a></div>
        <div><a href="#d-cdar">cdar</a></div>
        <div><a href="#d-cddr">cddr</a></div>
        <div><a href="#d-caaar">caaar</a></div>
        <div><a href="#d-caadr">caadr</a></div>
        <div><a href="#d-cadar">cadar</a></div>
        <div><a href="#d-caddr">caddr</a></div>
        <div><a href="#d-third">third</a></div>
        <div><a href="#d-cdaar">cdaar</a></div>
        <div><a href="#d-cdadr">cdadr</a></div>
        <div><a href="#d-cddar">cddar</a></div>
        <div><a href="#d-cdddr">cdddr</a></div>
        <div><a href="#d-length">length</a></div>
        <div><a href="#d-reverse">reverse</a></div>
        <div><a href="#d-nth">nth</a></div>
        <div><a href="#d-empty-eq">empty?</a></div>


        <div><strong class="b">Iteration</strong></div>
        <div><a href="#d-dolist">dolist</a></div>
        <div><a href="#d-dotimes">dotimes</a></div>
        <div><a href="#d-map">map</a></div>
        <div><a href="#d-filter">filter</a></div>
        <div><a href="#d-foreach">foreach</a></div>
        <div><a href="#d-reduce">reduce</a></div>


        <div><strong class="b">Functions</strong></div>
        <div><a href="#d-identity">identity</a></div>
        <div><a href="#d-curry">curry</a></div>
        <div><a href="#d-compose">compose</a></div>
        <div><a href="#d---gt">-&gt;</a></div>


        <div><strong class="b">Boxes</strong></div>
        <div><a href="#d-box">box</a></div>
        <div><a href="#d-unbox">unbox (@)</a></div>
        <div><a href="#d-swap-bang">swap!</a></div>


        <div><strong class="b">Association Lists</strong></div>
        <div><a href="#d-alist-qm">alist?</a></div>
        <div><a href="#d-alist-has-qm">alist-has?</a></div>
        <div><a href="#d-alist-get">alist-get</a></div>
        <div><a href="#d-alist-set">alist-set</a></div>
        <div><a href="#d-alist-set-in">alist-set-in</a></div>
        <div><a href="#d-alist-update">alist-update</a></div>
        <div><a href="#d-alist-update-in">alist-update-in</a></div>
        <div><a href="#d-alist-del">alist-del</a></div>
        <div><a href="#d-alist-keys">alist-keys</a></div>
        <div><a href="#d-alist-vals">alist-vals</a></div>


        <div><strong class="b">Objects</strong></div>
        <div><a href="#d-obj">obj</a></div>
        <div><a href="#d-defobj">defobj</a></div>
        <div><a href="#d-colon">:</a></div>
        <div><a href="#d-super">super</a></div>
        <div><a href="#d-new">new</a></div>
        <div><a href="#d-obj-get">obj-get</a></div>
        <div><a href="#d-obj-set">obj-set</a></div>
        <div><a href="#d-obj-del">obj-del</a></div>
        <div><a href="#d-obj-proto">obj-proto</a></div>
        <div><a href="#d-obj-proto-set-bang">obj-proto-set!</a></div>
        <div><a href="#d-obj-to-alist">obj->alist</a></div>


        <div><strong class="b">Collections</strong></div>
        <div><a href="#d-conj">conj</a></div>
        <div><a href="#d-extend">extend</a></div>


        <div><strong class="b">Errors</strong></div>
        <div><a href="#d-error">error</a></div>
        <div><a href="#d-trap-error">trap-error</a></div>


        <div><strong class="b">OS</strong></div>
        <div><a href="#d-star-stdin-star">*stdin*</a></div>
        <div><a href="#d-star-stdout-star">*stdout*</a></div>
        <div><a href="#d-star-stderr-star">*stderr*</a></div>
        <div><a href="#d-star-in-star">*in*</a></div>
        <div><a href="#d-star-out-star">*out*</a></div>
        <div><a href="#d-open">open</a></div>
        <div><a href="#d-close">close</a></div>
        <div><a href="#d-read">read</a></div>
        <div><a href="#d-write">write</a></div>
        <div><a href="#d-newline">newline</a></div>
        <div><a href="#d-pr">pr</a></div>
        <div><a href="#d-prn">prn</a></div>
        <div><a href="#d-print">print</a></div>
        <div><a href="#d-println">println</a></div>
        <div><a href="#d-read-all">read-all</a></div>
        <div><a href="#d-exit">exit</a></div>
        <div><a href="#d-sleep">sleep</a></div>
        <div><a href="#d-seconds">seconds</a></div>
        <div><a href="#d-isatty">isatty</a></div>
        <div><a href="#d-getenv">getenv</a></div>


        <div><strong class="b">Net</strong></div>
        <div><a href="#d-socket">socket</a></div>
        <div><a href="#d-bind-inet">bind-inet</a></div>
        <div><a href="#d-listen">listen</a></div>
        <div><a href="#d-accept">accept</a></div>


        <div><strong class="b">HTTP</strong></div>
        <div><a href="#d-star-http-codes-star">*http-codes*</a></div>
        <div><a href="#d-http-C-server">http/server</a></div>
        <div><a href="#d-http-C-listen">http/listen</a></div>
        <div><a href="#d-http-C-close">http/close</a></div>
        <div><a href="#d-http-C-add">http/add</a></div>
        <div><a href="#d-http-C-get">http/get</a></div>
        <div><a href="#d-http-C-post">http/post</a></div>
        <div><a href="#d-http-C-put">http/put</a></div>
        <div><a href="#d-http-C-delete">http/delete</a></div>
        <div><a href="#d-http-C-head">http/head</a></div>
      </p>
    </aside>
    <main class="fl w-75-ns w-100">
      <h2 class="f2 fw3 mt3">Language Reference</h2>

      <h3 class="f4 fw3 bb b--dark-pink dark-pink pb2">Basics</h3>

      <article class="mb4" id="d-def">
        <header>
          <span class="code b f3">def</span>
          <span>primitive</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (def name value)
          <span class="light-silver">; sym -&gt; any =&gt; any</span>
        </div>
        <p>
          Assigns <code>value</code> to the symbol <code>name</code> in the current environment.
        </p>
      </article>

      <article class="mb4" id="d-set">
        <header>
          <span class="code b f3">set</span>
          <span>primitive</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (set name value)
          <span class="light-silver">; sym -&gt; any =&gt; any</span>
        </div>
        <p>
          Assigns <code>value</code> to the symbol <code>name</code> in the environment where it
          was defined. If <code>name</code> was not previouly defined, setting it is an error.
        </p>
      </article>

      <article class="mb4" id="d-dfn">
        <header>
          <span class="code b f3">fn</span>
          <span>primitive</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (fn (arg1 ...) body ...) <span class="light-silver">; list|sym -&gt; any =&gt; fn</span><br />
          (fn (arg . rest) body ...) <span class="light-silver">; list|sym -&gt; any =&gt; fn</span>
        </div>
        <p>
          Creates a new function. The 1st argument is the list of arguments the function will take.
          The body can be one or more expressions.
          Shi functions capture the environment they are created in.
        </p>
        <p>
          If given a dotted list as 1st argument, the last param will be bound to a list of the rest
          arguments given when called.
        </p>
        <p>
          If given a symbol as 1st argument, this symbol will be bound to the list of arguments
          the function was given when called.
        </p>
      </article>

      <article class="mb4" id="d-defn">
        <header>
          <span class="code b f3">defn</span>
          <span>macro</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (defn name (arg1 ...) body ...)
          <span class="light-silver">; sym -&gt; list|sym -&gt; any* =&gt; fn</span>
        </div>
        <p>
          A combination of <code>def</code> and <code>fn</code>. Creates a new function and assigns
          it to <code>name</code>.
        </p>
      </article>

      <article class="mb4" id="d-do">
        <header>
          <span class="code b f3">do</span>
          <span>primitive</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (do expr ...)
          <span class="light-silver">; any* =&gt; any</span>
        </div>
        <p>
          Take multiple expressions, evaluates them in order and returns the value of the last one.
          When given no argument, return <code>nil</code>.
        </p>
      </article>

      <article class="mb4" id="d-while">
        <header>
          <span class="code b f3">while</span>
          <span>primitive</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (while test body ...)
          <span class="light-silver">; any -&gt; any* =&gt; any</span>
        </div>
        <p>
          Evaluates <code>body</code> expressions until the <code>test</code> expression evaluates
          to <code>nil</code>.
        </p>
        <p>
          Shi does not implement tail-recursion, hence <code>while</code> and it's derived looping
          functions are the only way not to blow the stack when looping over large collections.
        </p>
      </article>

      <article class="mb4" id="d-apply">
        <header>
          <span class="code b f3">apply</span>
          <span>primitive</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (apply f args)
          <span class="light-silver">; fn|macro|primitive -&gt; list =&gt; any</span>
        </div>
        <p>
          Calls the function <code>f</code> with the argument list provided.
        </p>
      </article>

      <article class="mb4" id="d-eval">
        <header>
          <span class="code b f3">eval</span>
          <span>primitive</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (eval expr)
          <span class="light-silver">; any =&gt; any</span>
        </div>
        <p>
          Evaluates the given expression in the current environment.
        </p>
      </article>


      <h3 class="f4 fw3 bb b--dark-pink dark-pink pb2">Conditionals</h3>

      <article class="mb4" id="d-if">
        <header>
          <span class="code b f3">if</span>
          <span>primitive</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (if test then)
          <span class="light-silver">; any -&gt; any =&gt; any</span><br />
          (if test then else)
          <span class="light-silver">; any -&gt; any -&gt; any =&gt; any</span><br />
          (if cond1 val1 cond2 val2 ...)
          <span class="light-silver">; any* =&gt; any</span>
        </div>
        <p>
          Basic conditional construct. Evaluates 1st argument, if non-<code>nil</code> returns
          the 2nd argument evaluated. Else, it continues with subsequent test/value pairs.
        </p>
        <p>
          If the number of arguments is un-even, the last argument is considered to be the default
          value and will be returned when all previous tests fail.
        </p>
      </article>

      <article class="mb4" id="d-cond">
        <header>
          <span class="code b f3">cond</span>
          <span>primitive</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (cond test then)
          <span class="light-silver">; any -&gt; any =&gt; any</span><br />
          (cond test then else)
          <span class="light-silver">; any -&gt; any -&gt; any =&gt; any</span><br />
          (cond cond1 val1 cond2 val2 ...)
          <span class="light-silver">; any* =&gt; any</span>
        </div>
        <p>
          <code>cond</code> is an alias for <code>if</code>.
        </p>
      </article>

      <article class="mb4" id="d-not">
        <header>
          <span class="code b f3">not</span>
          <span>function</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (not expr)
          <span class="light-silver">; any =&gt; nil|any</span>
        </div>
        <p>
          Return it's first argument negated. If given a non-<code>nil</code> value, returns
          <code>nil</code>. When given <code>nil</code> returns <code>t</code>.
        </p>
      </article>

      <article class="mb4" id="d-when">
        <header>
          <span class="code b f3">when</span>
          <span>macro</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (when test body ...)
          <span class="light-silver">; any -&gt; any* =&gt; any</span>
        </div>
        <p>
          If test evaluates to a non-<code>nil</code> value, evaluates body expressions and returns
          the value of the last one.
        </p>
      </article>

      <article class="mb4" id="d-unless">
        <header>
          <span class="code b f3">unless</span>
          <span>macro</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (unless test body ...)
          <span class="light-silver">; any -&gt; any* =&gt; any</span>
        </div>
        <p>
          If test evaluates to <code>nil</code>, evaluates body expressions and returns the value
          of the last one.
        </p>
      </article>

      <article class="mb4" id="d-or">
        <header>
          <span class="code b f3">or</span>
          <span>macro</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (or expr ...)
          <span class="light-silver">; any* =&gt; any</span>
        </div>
        <p>
          Evaluates expressions given in order returning the first non-<code>nil</code> value or
          <code>nil</code>.
        </p>
      </article>

      <article class="mb4" id="d-and">
        <header>
          <span class="code b f3">and</span>
          <span>macro</span>
        </header>
        <div class="bg-near-white code mid-gray pa3 mt3">
          (and expr ...)
          <span class="light-silver">; any* =&gt; any</span>
        </div>
        <p>
          Evaluates expressions given in order returning with <code>nil</code> as soon as
          encountered. If all expressions are non-<code>nil</code> returns the value of the last one.
        </p>
      </article>

    </main>
  </div>

  <footer class="mt4 tc gray">
    Shi Language &bull; <a href="https://github.com/shi-lang/shi">Source Code</a> &bull; MIT Licensed
  </footer>
</div>
